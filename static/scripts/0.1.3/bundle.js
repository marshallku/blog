var a="/html",p="#main",m="partial-content",l="spa-page-styles",r={isLoading:!1};function g(t){if(!t.href)return!1;let e=new URL(t.href,window.location.origin);if(e.origin!==window.location.origin||t.target==="_blank"||t.hasAttribute("download"))return!1;let n=e.pathname.split(".").pop()?.toLowerCase();return!(n&&["pdf","zip","png","jpg","jpeg","gif","webp"].includes(n))}function h(t){return t.endsWith("/")?`${t}index.html`:t.endsWith(".html")?t:`${t}/index.html`}function w(t){let n=new URL(t,window.location.origin).pathname;if(n.startsWith(a))return t;let o=`${a}${n}`;return h(o)}async function y(t){let e=w(t),n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch partial: ${n.status}`);return await n.text()}function T(){let t=document.getElementById(m);if(!t)return;let e=t.dataset.pageTitle;e&&(document.title=e);let n=t.dataset.pageStyles;n&&E(n)}function E(t){let e=document.getElementById(l),n=e?.href??"";if(!t){e?.remove();return}let o=new URL(t,window.location.origin).href;if(n===o)return;if(e){e.href=t;return}let i=document.createElement("link");i.id=l,i.rel="stylesheet",i.href=t,document.head.appendChild(i)}function L(t){if(typeof Alpine>"u")return;t.querySelectorAll("[x-data], [x-init]").forEach(n=>{n instanceof HTMLElement&&Alpine.initTree(n)})}function v(t){t.querySelectorAll("pre > code").forEach(n=>{let o=n.parentElement;if(!o||o.querySelector(".copy-code"))return;let i=document.createElement("button");i.className="copy-code",i.textContent="Copy",i.type="button",i.addEventListener("click",async()=>{let f=n.textContent||"";try{await navigator.clipboard.writeText(f),i.textContent="Copied!",setTimeout(()=>{i.textContent="Copy"},2e3)}catch{i.textContent="Failed"}}),o.style.position="relative",o.appendChild(i)})}async function c(t,e=!0){if(r.isLoading)return;r.isLoading=!0;let n=document.querySelector(p);if(!n){r.isLoading=!1,window.location.href=t;return}n.classList.add("spa-loading");try{let o=await y(t),i=n.querySelector(".container");i&&(i.innerHTML=o,T(),L(i),v(i)),e&&history.pushState({url:t},"",t),window.scrollTo({top:0,behavior:"instant"})}catch(o){console.error("SPA navigation failed:",o),window.location.href=t}finally{n.classList.remove("spa-loading"),r.isLoading=!1}}function C(t){if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||t.button!==0)return;let e=t.target.closest("a");!e||!(e instanceof HTMLAnchorElement)||g(e)&&(t.preventDefault(),c(e.href))}function b(t){let e=t.state?.url||window.location.href;c(e,!1)}function s(){document.addEventListener("click",C),window.addEventListener("popstate",b),history.replaceState({url:window.location.href},"",window.location.href)}function d(t,e=500){let n=0;return(...o)=>{let i=Date.now();i-n>=e&&(n=i,t(...o))}}function u(t){let e=!1;return(...n)=>{e||(e=!0,requestAnimationFrame(()=>{t(...n),e=!1}))}}document.addEventListener("DOMContentLoaded",()=>{x(),A(),S(),s()});function x(){let t=document.querySelector(".global-navigation");if(!t)return;let e=u(()=>{window.scrollY>=10?t.classList.add("global-navigation--scrolled"):t.classList.remove("global-navigation--scrolled")});window.addEventListener("scroll",e,{passive:!0})}function A(){let t=document.querySelector(".scroll-to-top");if(!t)return;let e=d(()=>{t.classList.toggle("visible",window.scrollY>300)},100);window.addEventListener("scroll",e,{passive:!0}),t.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function S(){document.querySelectorAll("pre > code").forEach(e=>{let n=e.parentElement;if(!n)return;let o=document.createElement("button");o.className="copy-code",o.textContent="Copy",o.type="button",o.addEventListener("click",async()=>{let i=e.textContent||"";try{await navigator.clipboard.writeText(i),o.textContent="Copied!",setTimeout(()=>{o.textContent="Copy"},2e3)}catch{o.textContent="Failed"}}),n.style.position="relative",n.appendChild(o)})}
