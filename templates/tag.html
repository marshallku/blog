{% extends "base.html" %}
{% import "components/post-card.html" as macros %}

{% block title %}Tag: {{ tag | urldecode }} - {{ config.site_title }}{% endblock %}

{% block content %}
<div class="tag-page">
    <header class="page-header">
        <h1 class="typography-h1">"{{ tag | urldecode }}" 태그</h1>
        <p class="post-count typography-c1">{{ post_count }} posts</p>
    </header>

    {% if posts %}
    <div class="post-grid">
        {% for post_meta in posts %}
        {{ macros::post_card(post=post_meta, show_category=true) }}
        {% endfor %}
    </div>

    {# Pagination navigation #}
    {% if pagination and pagination.total_pages > 1 %}
    <nav class="pagination pagination--gutter">
        {% if pagination.has_prev %}
        <a href="{{ pagination.prev_url }}" class="pagination__direction">
            <i class="icon-chevron-left"></i>
        </a>
        {% else %}
        <span class="pagination__direction pagination__direction--invisible">
            <i class="icon-chevron-left"></i>
        </span>
        {% endif %}

        {% for page in pagination.pages %}
        <a href="{{ page.url }}"
           class="pagination__page{% if page.is_current %} pagination__page--current{% endif %}"
           {% if page.is_current %}aria-current="true"{% endif %}>
            {{ page.number }}
        </a>
        {% endfor %}

        {% if pagination.has_next %}
        <a href="{{ pagination.next_url }}" class="pagination__direction">
            <i class="icon-chevron-right"></i>
        </a>
        {% else %}
        <span class="pagination__direction pagination__direction--invisible">
            <i class="icon-chevron-right"></i>
        </span>
        {% endif %}
    </nav>
    {% endif %}
    {% else %}
    <p class="typography-b1">No posts with this tag yet.</p>
    {% endif %}
</div>
{% endblock %}
