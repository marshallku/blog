{% extends "base.html" %}

{% block title %}{{ post.frontmatter.title }} - {{ config.site_title }}{% endblock %}

{% block description %}{{ post.frontmatter.description | default(value="") }}{% endblock %}

{% block meta %}
    {{ super() }}
    <meta property="og:title" content="{{ post.frontmatter.title }}">
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{ config.site_url }}/{{ post.category }}/{{ post.slug }}">
    {% if post.frontmatter.featured_image %}
    <meta property="og:image" content="{{ config.site_url }}{{ post.frontmatter.featured_image }}">
    {% endif %}
{% endblock %}

{% block content %}
<article class="post">
    <header class="post-header">
        {% if post.frontmatter.featured_image %}
        <img src="{{ post.frontmatter.featured_image }}" alt="{{ post.frontmatter.title }}" class="featured-image">
        {% endif %}

        <h1 class="post-title">{{ post.frontmatter.title }}</h1>

        <div class="post-meta">
            <time datetime="{{ post.frontmatter.date.posted }}" class="post-date">
                {{ post.frontmatter.date.posted | date(format="%B %d, %Y") }}
            </time>
            <span class="post-category">
                <a href="/{{ post.category }}">{{ post.category }}</a>
            </span>
        </div>

        {% if post.frontmatter.tags %}
        <div class="post-tags">
            {% for tag in post.frontmatter.tags %}
                <a href="/tag/{{ tag }}" class="tag">{{ tag | urldecode }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    <div class="post-content">
        {{ content | safe }}
    </div>

    {% if prev_post or next_post %}
    <nav class="post-navigation">
        {% if prev_post %}
        <a href="{{ prev_post.url }}" class="nav-prev">
            <span class="nav-label">← Previous</span>
            <span class="nav-title">{{ prev_post.title }}</span>
        </a>
        {% else %}
        <span class="nav-prev nav-empty"></span>
        {% endif %}

        {% if next_post %}
        <a href="{{ next_post.url }}" class="nav-next">
            <span class="nav-label">Next →</span>
            <span class="nav-title">{{ next_post.title }}</span>
        </a>
        {% else %}
        <span class="nav-next nav-empty"></span>
        {% endif %}
    </nav>
    {% endif %}
</article>

{% block comments %}
{% endblock %}
{% endblock %}
